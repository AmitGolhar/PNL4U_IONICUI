<ion-header translucent>
  <ion-toolbar color="dark">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/tabs/club" text="Back"></ion-back-button>
    </ion-buttons>
    <ion-title>{{ club?.clubName || 'Club Details' }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">

  <ion-spinner *ngIf="loading" name="crescent" class="spinner-center"></ion-spinner>

  <ng-container *ngIf="!loading && club">

    <ion-toolbar color="dark">
      <ion-buttons slot="start">
        <ion-back-button defaultHref="/tabs/clubs" text="Back"></ion-back-button>
      </ion-buttons>
      <ion-title>{{ club?.clubName || 'Club Details' }}</ion-title>
    </ion-toolbar>
    <!-- ğŸ–¼ï¸ Banner carousel -->
    <ion-slides pager="true">
      <ion-slide *ngFor="let img of club.imagesBase64">
        <img [src]="img" alt="club image" class="club-banner" />
      </ion-slide>
    </ion-slides>

    <!-- ğŸ“– Basic info -->
    <div class="club-header">
      <h2>{{ club.clubName }}
        <ion-icon *ngIf="club.verified" name="checkmark-circle" color="success"></ion-icon>
      </h2>
      <p>{{ club.city }} â€¢ {{ club.category }}</p>
    </div>

    <!-- â­ Ratings and Crowd -->
    <div class="rating-section">
      â­ <strong>{{ club.rating || 0 }}/5</strong>
      <span class="trend" *ngIf="club.trendingScore">ğŸ”¥ {{ club.trendingScore | number:'1.0-0' }} pts</span>
    </div>

    <!-- ğŸ§­ Description -->
    <p class="desc">{{ club.description }}</p>

    <!-- ğŸ¶ Tags -->
    <div class="tags">
      <div *ngIf="club.genre?.length" class="tag-group">
        <strong>Genres:</strong> {{ club.genre.join(', ') }}
      </div>
      <div *ngIf="club.crowdType?.length" class="tag-group">
        <strong>Crowd:</strong> {{ club.crowdType.join(', ') }}
      </div>
    </div>

    <!-- ğŸ”¥ Live crowd -->
    <div *ngIf="club.liveCrowdLevel" class="crowd-bar">
      <p>Live Crowd: {{ club.liveCrowdLevel }}%</p>
      <ion-progress-bar [value]="club.liveCrowdLevel / 100" color="warning"></ion-progress-bar>
    </div>

    <!-- ğŸ¹ Happy Hours -->
    <div *ngIf="club.happyHours?.length" class="happy-hours">
      <h4>ğŸ¹ Happy Hours</h4>
      <ion-list>
        <ion-item *ngFor="let h of club.happyHours">
          <ion-label>
            <strong>{{ h.dayOfWeek }}</strong><br />
            {{ h.startTime }} â€“ {{ h.endTime }}<br />
            <small>{{ h.offerDetails }}</small>
          </ion-label>
        </ion-item>
      </ion-list>
    </div>

    <!-- ğŸ“ Contact -->
    <div class="contact-info">
      <p>ğŸ“ {{ club.contactNumber }}</p>
      <p>ğŸ“ {{ club.address }}</p>
      <a *ngIf="club.mapLocationUrl" [href]="club.mapLocationUrl" target="_blank">
        ğŸŒ View on Map
      </a>
    </div>

    <!-- ğŸŒ Social Links -->
    <div class="social-links">
      <a *ngIf="club.websiteLink" [href]="club.websiteLink" target="_blank">ğŸŒ Website</a>
      <a *ngIf="club.instagramHandle" [href]="'https://instagram.com/' + club.instagramHandle.replace('@','')"
        target="_blank">
        ğŸ“¸ Instagram
      </a>
    </div>

    <!-- ğŸ« Actions -->
    <div class="club-actions">
      <ion-button fill="outline" size="small" class="pink-outline" (click)="bookTable()">
        <ion-icon name="wine-outline" slot="start"></ion-icon>
        Book Table
      </ion-button>

      <ion-button fill="outline" size="small" class="pink-outline" (click)="bookGuestList()">
        <ion-icon name="people-outline" slot="start"></ion-icon>
        Guest List
      </ion-button>
    </div>
  </ng-container>
</ion-content>