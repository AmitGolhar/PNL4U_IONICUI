<ion-header translucent>
  <ion-toolbar color="dark">
    <ion-buttons slot="start">
      <!-- ğŸ‘‡ Go back to the club detail page -->
      <ion-back-button [defaultHref]="'/tabs/clubs/club/' + club?.clubId" text="Back"></ion-back-button>
    </ion-buttons>
    <ion-title>{{  'Event Details' }}</ion-title>
  </ion-toolbar>
</ion-header>


<ion-content [fullscreen]="true" class="ion-padding">

  <!-- Loader -->
  <ion-spinner *ngIf="loading" name="crescent" class="spinner-center"></ion-spinner>

  <!-- Content -->
  <ng-container *ngIf="!loading && club">

    <!-- ğŸ–¼ï¸ Image Carousel -->
    <ion-slides pager="true" *ngIf="club.imagesBase64?.length">
      <ion-slide *ngFor="let img of club.imagesBase64">
        <img [src]="img" alt="club image" class="club-banner" />
      </ion-slide>
    </ion-slides>

    <!-- ğŸ·ï¸ Club Name and Category -->
    <h2 class="club-title">
      {{ club.clubName }}
      <ion-icon *ngIf="club.verified" name="checkmark-circle" color="success"></ion-icon>
    </h2>
    <p class="sub-info">ğŸ™ï¸ {{ club.city }}</p>
    <p class="sub-info">{{ club.category }}</p>

    <!-- ğŸ“– Description -->
    <p class="desc">{{ club.description }}</p>

    <!-- â­ Rating & Trending -->
    <div class="rating-section">
      <span>â­ {{ club.rating || 0 }}/5</span>
      <span *ngIf="club.trendingScore" class="trend">ğŸ”¥ {{ club.trendingScore | number:'1.0-0' }} pts</span>
    </div>

    <hr />


    <!-- ğŸ“‹ All Club Details -->
    <div class="details-list">

      <p *ngIf="club.address">
        <strong>ğŸ“ Address:</strong> {{ club.address }}
      </p>

      <p *ngIf="club.contactNumber">
        <strong>ğŸ“ Contact:</strong> {{ club.contactNumber }}
      </p>

      <p *ngIf="club.city">
        <strong>ğŸ™ï¸ City:</strong> {{ club.city }}
      </p>

      <p *ngIf="club.genre?.length">
        <strong>ğŸµ Genre:</strong> {{ club.genre.join(', ') }}
      </p>
      <p *ngIf="club.crowdType?.length">
        <strong>ğŸ·ï¸ Crowd Type:</strong> {{ club.crowdType.join(', ') }}
      </p>
      <p *ngIf="club.bannerType?.length">
        <strong>ğŸ·ï¸ Banner Type:</strong> {{ club.bannerType.join(', ') }}
      </p>

      <p *ngIf="club.popularityScore && club.popularityScore > 0">
        <strong>ğŸ“Š Popularity Score:</strong> {{ club.popularityScore }}
      </p>

      <p *ngIf="club.liveCrowdLevel && club.liveCrowdLevel > 0">
        <strong>ğŸ”¥ Live Crowd Level:</strong> {{ club.liveCrowdLevel }}%
      </p>

      <p *ngIf="club.hasHappyHours">
        <strong>ğŸ¹ Has Happy Hours:</strong> Yes
      </p>

      <p *ngIf="club.mapLocationUrl">
        <strong>ğŸ“ Map Location:</strong>
        <a [href]="club.mapLocationUrl" target="_blank">View on Map</a>
      </p>
    </div>


    <!-- ğŸ¸ Happy Hours -->
    <div *ngIf="club.happyHours?.length" class="happy-hours">
      <h4>ğŸ¸ Happy Hours</h4>
      <ion-list>
        <ion-item *ngFor="let h of club.happyHours">
          <ion-label>
            <strong>{{ h.dayOfWeek }}</strong><br />
            {{ h.startTime }} â€“ {{ h.endTime }}<br />
            <small *ngIf="h.offerDetails">{{ h.offerDetails }}</small>
          </ion-label>
        </ion-item>
      </ion-list>
    </div>


    <hr />


  </ng-container>


  <!-- ğŸ—“ Upcoming Events Section -->
  <div *ngIf="!loadingEvents && events.length > 0" class="ion-margin-top">
    <h3 class="section-title">ğŸ‰ Upcoming Events</h3>

    <!-- ğŸ”„ Event Slider -->
    <ion-slides [options]="{ slidesPerView: 1.15, spaceBetween: 16, freeMode: true, centeredSlides: false }"
      class="event-slider">
      <ion-slide *ngFor="let e of events" class="event-slide">
        <div class="event-slide-card">

          <!-- ğŸ–¼ Event Image -->
          <div class="event-banner" *ngIf="e.imagesBase64?.length">
            <img [src]="e.imagesBase64[0]" alt="{{ e.eventName }}" />
          </div>

          <!-- ğŸ§¾ Event Info -->
          <div class="event-info">

            <h2 class="event-title">{{ e.eventName }}</h2>

            <p class="event-date">
              <ion-icon name="calendar-outline"></ion-icon>
              {{ formatDateTime(e.startDate) }} â†’ {{ formatDateTime(e.endDate) }}
            </p>

            <p *ngIf="e.venueName" class="venue">ğŸ“ {{ e.venueName }}</p>
            <p *ngIf="e.locationCity" class="city">ğŸ™ï¸ {{ e.locationCity }}</p>

            <p *ngIf="e.artistName" class="artist">ğŸ¤ {{ e.artistName }}</p>
            <p *ngIf="e.genre" class="genre">ğŸ¶ {{ e.genre }}</p>

            <p *ngIf="e.crowdType" class="crowd">ğŸ‘¥ {{ e.crowdType }}</p>
            <p *ngIf="e.entryPolicy" class="policy">ğŸšª Entry: {{ e.entryPolicy }}</p>
            <p *ngIf="e.dressCode" class="policy">ğŸ‘” Dress: {{ e.dressCode }}</p>

            <p *ngIf="e.offers" class="offer">ğŸ’¥ {{ e.offers }}</p>

            <p *ngIf="e.description" class="desc">"{{ e.description }}"</p>

            <!-- ğŸ· Event Meta -->
            <div class="event-meta">
              <ion-badge *ngIf="e.isFreeEntry" color="success">Free Entry</ion-badge>
              <ion-badge *ngIf="e.hasOffers" color="tertiary">Offers</ion-badge>
              <ion-badge *ngIf="e.isWeekend" color="warning">Weekend</ion-badge>
            </div>

          <ion-button
          expand="block"
          fill="outline"
          color="secondary"
          [routerLink]="['/tabs/event-detail', e.eventId]"
        >
          <ion-icon name="eye-outline" slot="start"></ion-icon>
          Details & Booking
        </ion-button>




          </div>
        </div>
      </ion-slide>
    </ion-slides>
  </div>




  <!-- ğŸ”„ Loading Spinner -->
  <ion-spinner *ngIf="loadingEvents" name="crescent" class="spinner-center"></ion-spinner>

  <!-- âš ï¸ No Events Found -->
  <div *ngIf="!loadingEvents && events.length === 0" class="ion-text-center ion-padding">
    <ion-icon name="calendar-outline" size="large" color="medium"></ion-icon>
    <p>No upcoming events for this club</p>
  </div>


  <div class="content-bottom-spacer"></div>

</ion-content>