<div class="event-requests-container ion-padding">
  <h2 class="section-title">ðŸŽŸ Event Requests Management</h2>

  <!-- ðŸ”¹ Filter Segment -->
  <ion-segment [(ngModel)]="selectedStatus" (ionChange)="loadEvents()">
    <ion-segment-button value="ALL">All</ion-segment-button>
    <ion-segment-button value="PENDING">Pending</ion-segment-button>
    <ion-segment-button value="APPROVED">Approved</ion-segment-button>
    <ion-segment-button value="REJECTED">Rejected</ion-segment-button>
  </ion-segment>

  <!-- ðŸ”¹ Loading -->
  <div *ngIf="loading" class="loading-text">Loading events...</div>

  <!-- ðŸ”¹ Table -->
  <div *ngIf="!loading && events.length > 0" class="table-container">
    <div class="table-scroll-wrapper">
      <table class="event-table">
        <thead>
          <tr>
            <th>Event ID</th>
            <th>Name</th>
            <th>City</th>
            <th>Venue</th>
            <th>Category</th>
            <th>Artist</th>
            <th>Type</th>
            <th>Status</th>
            <th>Approval</th>
            <th>Actions</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let e of events" [class.pending]="e.approvalStatus === 'PENDING'">
            <td>{{ e.eventId }}</td>
            <td>{{ e.eventName }}</td>
            <td>{{ e.locationCity }}</td>
            <td>{{ e.venueName }}</td>
            <td>{{ e.category }}</td>
            <td>{{ e.artistName }}</td>
            <td>{{ e.eventType }}</td>
            <td>{{ e.eventStatus }}</td>
            <td>
              <ion-badge
                [color]="
                  e.approvalStatus === 'APPROVED'
                    ? 'success'
                    : e.approvalStatus === 'REJECTED'
                    ? 'danger'
                    : 'warning'
                "
              >
                {{ e.approvalStatus }}
              </ion-badge>
            </td>

            <td class="actions">
              <ion-button size="small" color="medium" (click)="openEditModal(e)">Edit</ion-button>

              <ng-container *ngIf="e.approvalStatus === 'PENDING'">
                <ion-button size="small" color="success" (click)="approve(e)">Approve</ion-button>
                <ion-button size="small" color="danger" (click)="reject(e)">Reject</ion-button>
              </ng-container>

              <ion-button
                *ngIf="e.approvalStatus !== 'PENDING'"
                size="small"
                fill="outline"
                color="light"
                disabled
              >
                Reviewed
              </ion-button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- ðŸ”¹ No Data -->
  <div *ngIf="!loading && events.length === 0" class="no-data">
    <ion-icon name="alert-circle-outline"></ion-icon>
    <p>No event requests found.</p>
  </div>
</div>
